<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: sans-serif;
      padding: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }

    .modal {
      background: white;
      width: 500px;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    }

    h2 {
      margin-top: 0;
      color: #6264A7;
    }

    .field {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      font-size: 13px;
    }

    input,
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-sizing: border-box;
    }

    button {
      background: #6264A7;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
    }

    .close-btn {
      background: #eee;
      color: #333;
      margin-top: 10px;
    }

    .list {
      margin-top: 20px;
      max-height: 200px;
      overflow-y: auto;
    }

    .item {
      padding: 10px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      font-size: 13px;
    }

    .item b {
      color: #6264A7;
    }
  </style>
</head>

<body>
  <div class="modal">
    <h2>Respostas RÃ¡pidas</h2>
    <div class="field">
      <label>Gatilho (ex: /ola)</label>
      <input type="text" id="trigger" placeholder="\comando">
    </div>
    <div class="field">
      <label>Resposta</label>
      <textarea id="text" rows="3"></textarea>
    </div>
    <button id="add-btn">Salvar Resposta</button>
    <div class="list" id="res-list"></div>
    <button class="close-btn" id="close-btn">Voltar para o Teams</button>
  </div>
  <script>
    const listEl = document.getElementById('res-list');

    function load() {
      chrome.storage.local.get(['responses'], (res) => {
        const list = res.responses || [];
        listEl.innerHTML = list.map(r => `
          <div class="item">
            <span><b>${r.trigger}</b>: ${r.text.substring(0, 30)}...</span>
          </div>
        `).join('');
      });
    }

    document.getElementById('add-btn').onclick = () => {
      const trigger = document.getElementById('trigger').value;
      const text = document.getElementById('text').value;
      if (trigger && text) {
        chrome.storage.local.get(['responses'], (res) => {
          const list = res.responses || [];
          list.push({ trigger, text, id: Date.now() });
          chrome.storage.local.set({ responses: list }, () => {
            document.getElementById('trigger').value = '';
            document.getElementById('text').value = '';
            load();
          });
        });
      }
    };

    document.getElementById('close-btn').onclick = () => {
      window.parent.postMessage({ type: 'TF_CLOSE_RESPONSES' }, '*');
    };

    load();
  </script>
</body>

</html>